{
  "category": "Pressure Transducers",
  "predefined": true,
  "devices": [
    {
      "id": 200,
      "name": "Pressure Transducer",
      "input": "mV",
      "resistor": 10000,
      "convertValue": "device.values.psi = Math.round(parseFloat(Math.max(0, ((value - (device.options.inducerOffset * 1000))/1000) * device.options.psiPerVolt)) * 100)/100;device.values.kPa=utils.convert.pressure.convertUnits(device.values.psi,'psi','kpa');device.values.atm=utils.convert.pressure.convertUnits(device.values.psi,'psi','atm');return value;",
      "outputs": [
        {
          "name": "adcValue",
          "desc": "ADC Value",
          "maxSamples": 50
        },
        {
          "name": "volts",
          "desc": "Volts from the channel",
          "maxSamples": 50
        },
        {
          "name": "millivolts",
          "desc": "mV from the channel",
          "maxSamples": 50
        },
        {
          "name": "psi",
          "desc": "Presure in psi",
          "maxSamples": 50
        },
        {
          "name": "kpa",
          "desc": "Presure in kilopascals",
          "maxSamples": 50
        },
        {
          "name": "atm",
          "desc": "Presure in atmoshperes",
          "maxSamples": 50
        },
        {
          "name": "all",
          "desc": "All values",
          "maxSamples": 50
        }
      ],
      "options": [
        {
          "field": {
            "type": "div",
            "style": {
              "display": "inline-block",
              "verticalAlign": "top",
              "marginLeft": ".5rem"
            }
          },
          "options": [
            {
              "bind": "options.inducerOffset",
              "dataType": "number",
              "default": 0.5,
              "field": {
                "type": "valueSpinner",
                "bind": "options.inducerOffset",
                "labelText": "Inducer Offset",
                "units": "v",
                "required": true,
                "canEdit": true,
                "labelAttrs": {
                  "style": {
                    "width": "7rem"
                  }
                },
                "min": 0,
                "max": 10,
                "step": 0.1,
                "style": {
                  "display": "block"
                }
              }
            },
            {
              "bind": "options.psiPerVolt",
              "dataType": "number",
              "default": 25,
              "field": {
                "bind": "options.psiPerVolt",
                "type": "valueSpinner",
                "labelText": "PSI per Volt",
                "units": "psi",
                "required": true,
                "canEdit": true,
                "labelAttrs": {
                  "style": {
                    "width": "7rem"
                  }
                },
                "min": 0,
                "max": 50,
                "style": {
                  "display": "block"
                }
              }
            }
          ]
        },
        {
          "field": {
            "type": "div",
            "style": {
              "display": "inline-block",
              "verticalAlign": "top",
              "marginLeft": "1rem",
              "fontSize": ".8rem"
            }
          },
          "options": [
            {
              "field": {
                "type": "staticField",
                "labelText": "Pressure",
                "binding": "values.psi",
                "dataType": "number",
                "fmtMask": "#,##0.000",
                "style": {
                  "display": "block",
                  "fontSize": ".8rem",
                  "lineHeight": "1.2"
                },
                "units": "psi",
                "labelAttrs": {
                  "style": {
                    "display": "none"
                  }
                },
                "inputAttrs": {
                  "style": {
                    "width": "4rem",
                    "textAlign": "right"
                  }
                }
              }
            },
            {
              "field": {
                "type": "staticField",
                "labelText": "Pressure",
                "binding": "values.kPa",
                "dataType": "number",
                "fmtMask": "#,##0.000",
                "style": {
                  "display": "block",
                  "fontSize": ".8rem",
                  "lineHeight": "1.2"
                },
                "units": "kPa",
                "labelAttrs": {
                  "style": {
                    "display": "none"
                  }
                },
                "inputAttrs": {
                  "style": {
                    "width": "4rem",
                    "textAlign": "right"
                  }
                }

              }
            },
            {
              "field": {
                "type": "staticField",
                "labelText": "Pressure",
                "binding": "values.atm",
                "dataType": "number",
                "fmtMask": "#,##0.000",
                "style": {
                  "display": "block",
                  "fontSize": ".8rem",
                  "lineHeight": "1.2"
                },
                "units": "atm",
                "labelAttrs": {
                  "style": {
                    "display": "none"
                  }
                },
                "inputAttrs": {
                  "style": {
                    "width": "4rem",
                    "textAlign": "right"
                  }
                }

              }
            }

          ]
        }

      ],
      "interfaces": [
        "spi"
      ]
    },
    {
      "id": 201,
      "name": "Altas EZO-PRS",
      "deviceClass": "AtlasEZOprs",
      "module": "./AtlasEZO",
      "hasReset": true,
      "hasChangeAddress": true,
      "readings": {
        "pressure": {
          "label": "Pressure",
          "interval": {
            "min": 2000,
            "max": 99000,
            "default": 10000
          }
        }
      },
      "outputs": [
        {
          "name": "pressure",
          "desc": "Presure in the reported units",
          "maxSamples": 50
        },
        {
          "name": "all",
          "desc": "All values",
          "maxSamples": 50
        }
      ],
      "options": [
        {
          "dataType": "panel",
          "field": {
            "type": "div",
            "style": {
              "display": "inline-block"
            }
          },
          "options": [
            {
              "bind": "options.name",
              "dataType": "string",
              "default": "",
              "field": {
                "type": "inputField",
                "required": false,
                "bind": "options.name",
                "labelText": "Name",
                "inputAttrs": {
                  "maxLength": 16,
                  "style": {
                    "width": "16rem"
                  }
                },
                "style": {
                  "display": "block"
                }
              }
            },
            {
              "field": {
                "type": "div"
              },
              "options": [
                {
                  "dataType": "boolean",
                  "default": false,
                  "field": {
                    "type": "checkbox",
                    "bind": "options.isProtocolLocked",
                    "labelText": "Lock Protocol"
                  }
                },
                {
                  "dataType": "boolean",
                  "default": false,
                  "field": {
                    "type": "checkbox",
                    "bind": "options.ledEnabled",
                    "labelText": "LED Enabled",
                    "style": {
                      "marginLeft": "1rem"
                    }
                  }
                }
              ]
            },
            {
              "bind": "options.readInterval",
              "dataType": "int",
              "default": false,
              "field": {
                "binding": "options.readInterval",
                "type": "valueSpinner",
                "labelText": "Read Interval",
                "min": 2000,
                "max": 99000,
                "canEdit": true,
                "fmtMask": "#,##0",
                "emptyMask": "--",
                "labelAttrs": {
                  "style": { "paddingRight": ".25rem" }
                },
                "inputAttrs": {
                  "style": { "width": "4.5rem" }
                },
                "units": "ms",
                "style": {
                  "marginLeft": ".25rem",
                  "display": "block"
                }
              }
            },
            {
              "dataType": "panel",
              "field": {
                "type": "fieldset",
                "legend": "Device Info",
                "style": {
                  "display": "block",
                  "verticalAlign": "top"
                }
              },
              "options": [
                {
                  "field": {
                    "type": "staticField",
                    "labelText": "Firmware",
                    "binding": "info.firmware",
                    "style": {
                      "display": "block",
                      "fontSize": ".8rem",
                      "lineHeight": "1.2"
                    },
                    "labelAttrs": {
                      "style": {
                        "width": "5.5rem"
                      }
                    },
                    "cssClass": "i2cDeviceInformation"
                  }
                },
                {
                  "field": {
                    "type": "div",
                    "style": {
                      "lineHeight": ".8"
                    }
                  },
                  "options": [
                    {
                      "field": {
                        "type": "staticField",
                        "labelText": "Last Restart",
                        "binding": "info.lastRestart.name",
                        "style": {
                          "fontSize": ".8rem",
                          "lineHeight": "1.2"
                        },
                        "labelAttrs": {
                          "style": {
                            "width": "5.5rem"
                          }
                        }
                      }
                    },
                    {
                      "field": {
                        "type": "staticField",
                        "labelText": "-",
                        "binding": "info.lastRestart.desc",
                        "style": {
                          "fontSize": ".8rem",
                          "lineHeight": "1.2"
                        }
                      }
                    }
                  ]
                },
                {
                  "field": {
                    "type": "staticField",
                    "labelText": "Vcc Voltage",
                    "binding": "info.vcc",
                    "style": {
                      "display": "block",
                      "fontSize": ".8rem",
                      "lineHeight": "1.2"
                    },
                    "dataType": "number",
                    "fmtMask": "#,##0.0##",
                    "emptyMask": "--.-",
                    "inputAttrs": {
                      "style": {
                        "width": "2.2em",
                        "textAlign": "right"
                      }
                    },
                    "labelAttrs": {
                      "style": {
                        "width": "5.5rem"
                      }
                    },
                    "units": "voltage"
                  }
                }
              ]
            },
            {
              "dataType": "panel",
              "field": {
                "type": "fieldset",
                "legend": "Readings",
                "cssClass": "i2cReadingValues",
                "style": {
                  "display": "block",
                  "verticalAlign": "top"
                }
              },
              "options": [
                {
                  "field": {
                    "type": "staticField",
                    "labelText": "Pressure",
                    "binding": "values.pressure",
                    "dataType": "number",
                    "fmtMask": "#,##0.0###",
                    "emptyMask": "--.-",
                    "style": {
                      "display": "block",
                      "fontSize": ".8rem",
                      "lineHeight": "1.2"
                    },
                    "unitsBinding": "values.units.name",
                    "labelAttrs": {
                      "style": {
                        "width": "5rem"
                      }
                    }
                  }
                }
              ]
            }
          ]
        },
        {
          "field": {
            "type": "div",
            "style": {
              "display": "inline-block",
              "verticalAlign": "top",
              "marginLeft": ".5rem"
            }
          },
          "options": [
            {
              "field": {
                "type": "fieldset",
                "legend": "Precision"
              },
              "options": [
                {
                  "field": {
                    "type": "div"
                  },
                  "options": [
                    {
                      "default": 0,
                      "field": {
                        "binding": "options.decPlaces",
                        "type": "valueSpinner",
                        "labelText": "Decimals",
                        "min": 0,
                        "max": 3,
                        "labelAttrs": {
                          "style": {
                            "width": "5rem"
                          }
                        }
                      }
                    },
                    {
                      "default": "psi",
                      "field": {
                        "type": "pickList",
                        "labelText": "Units",
                        "binding": "options.units.name",
                        "bindColumn": 0,
                        "displayColumn": 0,
                        "style": {
                          "display": "block"
                        },
                        "labelAttrs": {
                          "style": {
                            "width": "5rem"
                          }
                        },
                        "columns": [
                          {
                            "hidden": false,
                            "binding": "name",
                            "text": "name",
                            "style": {
                              "whiteSpace": "nowrap"
                            }
                          },
                          {
                            "hidden": false,
                            "binding": "desc",
                            "text": "Description",
                            "style": {
                              "whiteSpace": "nowrap"
                            }
                          }
                        ],
                        "items": [
                          {
                            "name": "psi",
                            "desc": "Pounds per Square Inch"
                          },
                          {
                            "name": "atm",
                            "desc": "Atmospheres"
                          },
                          {
                            "name": "bar",
                            "desc": "Metric Pressure"
                          },
                          {
                            "name": "kPa",
                            "desc": "Kilo-Pascals"
                          },
                          {
                            "name": "inh2o",
                            "desc": "Inches of Water Column"
                          },
                          {
                            "name": "cmh2o",
                            "desc": "Centimeters of Water Column"
                          }
                        ],
                        "inputAttrs": {
                          "style": {
                            "width": "4rem"
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "dataType": "panel",
              "field": {
                "type": "fieldset",
                "legend": "Calibration",
                "style": {
                  "display": "inline-block",
                  "verticalAlign": "top"
                },
                "attrs": { "data-bindingcontext": "calibration" }
              },
              "options": [
                {
                  "field": {
                    "type": "div",
                    "style": { "width": "15rem" },
                    "html": "Calibrating the sensor sets the 0 point to the current pressure sensed by the probe.",
                    "cssClass": "script-advanced-instructions"
                  }
                },
                {
                  "dataType": "panel",
                  "field": {
                    "type": "div",
                    "style": {
                      "display": "inline-block",
                      "verticalAlign": "top"
                    }
                  },
                  "options": [
                    {
                      "dataType": "panel",
                      "field": {
                        "type": "div",
                        "attrs": { "data-bindingcontext": "calibrate" }
                      },
                      "options": [
                        {
                          "field": {
                            "type": "actionButton",
                            "text": "Calibrate",
                            "icon": "<i class=\"fas fa-cogs\"></i>",
                            "style": { "width": "7rem" }
                          },
                          "fieldEvents": {
                            "click": {
                              "type": "putservice",
                              "path": "`/config/i2c/${device.busNumber}/${device.address}/deviceCommand/calibrate`",
                              "message": "Calibrating Sensor...",
                              "callContext": "calibrate",
                              "resultContext": "calibration"
                            }
                          }
                        }
                      ]
                    }
                  ]
                }
              ]
            },

            {
              "field": {
                "type": "fieldset",
                "legend": "High Pressure Alarm"
              },
              "options": [
                {
                  "field": {
                    "type": "div",
                    "style": {
                      "width": "15rem"
                    },
                    "html": "These settings will trigger the alarm pin when the pressure is exceeded.<hr style=\"margin:2px\"></hr>Provide the max pressure as well as the tolerance for when the alarm will reset.",
                    "cssClass": "script-advanced-instructions"
                  }
                },
                {
                  "default": 0,
                  "field": {
                    "binding": "options.alarm.enable",
                    "type": "checkbox",
                    "labelText": "Enable",
                    "style": {
                      "display": "block"
                    }
                  }
                },
                {
                  "default": 0,
                  "field": {
                    "binding": "options.alarm.pressure",
                    "type": "valueSpinner",
                    "labelText": "Pressure",
                    "min": 0,
                    "max": 1000,
                    "canEdit": true,
                    "fmtMask": "#,##0.###",
                    "style": {
                      "display": "block"
                    },
                    "labelAttrs": {
                      "style": {
                        "width": "5rem"
                      }
                    },
                    "inputAttrs": {
                      "style": {
                        "width": "5rem"
                      }
                    },
                    "unitsBinding": "options.alarm.units.name"
                  }
                },
                {
                  "default": 0,
                  "field": {
                    "binding": "options.alarm.tolerance",
                    "type": "valueSpinner",
                    "labelText": "Tolerance",
                    "min": 0,
                    "max": 1000,
                    "canEdit": true,
                    "fmtMask": "#,##0.###",
                    "style": {
                      "display": "block"
                    },
                    "labelAttrs": {
                      "style": {
                        "width": "5rem"
                      }
                    },
                    "inputAttrs": {
                      "style": {
                        "width": "5rem"
                      }
                    },
                    "unitsBinding": "options.alarm.units.name"
                  }
                }
              ]
            }
          ]
        }
      ],
      "interfaces": [
        "i2c"
      ]
    },
    {
      "id": 202,
      "name": "Pressure Transducer",
      "deviceClass": "GenericDeviceBase",
      "module": "./genericDevices",
      "_deviceClass": "Transducer",
      "convertValue": "device.values.psi = parseFloat(Math.max(0, ((device.values.voltage - device.options.inducerOffset) * device.options.psiPerVolt)).toFixed(2));",
      "input": "volts",
      "inputs": [
        {
          "name": "voltage",
          "desc": "Voltage",
          "dataType": "number"
        }
      ],
      "outputs": [
        {
          "name": "psi",
          "desc": "Presure in the reported units",
          "maxSamples": 50
        },
        {
          "name": "all",
          "desc": "All values",
          "maxSamples": 50
        }
      ],
      "options": [
        {
          "dataType": "panel",
          "field": {
            "type": "div",
            "style": {
              "display": "inline-block"
            }
          },
          "options": [
            {
              "bind": "options.name",
              "dataType": "string",
              "default": "",
              "field": {
                "type": "inputField",
                "required": false,
                "bind": "options.name",
                "labelText": "Name",
                "inputAttrs": {
                  "maxLength": 16,
                  "style": {
                    "width": "16rem"
                  }
                },
                "style": {
                  "display": "block"
                }
              }
            },
            {
              "dataType": "boolean",
              "default": true,
              "field": {
                "type": "checkbox",
                "bind": "isActive",
                "labelText": "Is Active"
              }
            },
            {
              "dataType": "panel",
              "field": {
                "type": "fieldset",
                "legend": "Readings",
                "cssClass": "genericReadingValues",
                "style": {
                  "display": "block",
                  "verticalAlign": "top"
                }
              },
              "options": [
                {
                  "field": {
                    "type": "staticField",
                    "labelText": "PSI",
                    "binding": "values.psi",
                    "dataType": "number",
                    "fmtMask": "#,##0.0###",
                    "emptyMask": "--.-",
                    "style": {
                      "display": "block",
                      "fontSize": ".8rem",
                      "lineHeight": "1.2"
                    },
                    "units": "psi",
                    "labelAttrs": {
                      "style": {
                        "width": "5rem"
                      }
                    }
                  }
                },
                {
                  "field": {
                    "type": "staticField",
                    "labelText": "Volts",
                    "binding": "values.voltage",
                    "dataType": "number",
                    "fmtMask": "#,##0.0###",
                    "emptyMask": "--.-",
                    "style": {
                      "display": "block",
                      "fontSize": ".8rem",
                      "lineHeight": "1.2"
                    },
                    "units": "v",
                    "labelAttrs": {
                      "style": {
                        "width": "5rem"
                      }
                    }
                  }
                }
              ]
            }
          ]
        },
        {
          "field": {
            "type": "div",
            "style": {
              "display": "inline-block",
              "verticalAlign": "top",
              "marginLeft": ".5rem"
            }
          },
          "options": [
            {
              "field": {
                "type": "fieldset",
                "legend": "Settings"
              },
              "options": [
                {
                  "field": {
                    "type": "div",
                    "style": {
                      "display": "block"
                    }
                  },
                  "options": [
                    {
                      "bind": "options.inducerOffset",
                      "dataType": "number",
                      "default": 0.5,
                      "field": {
                        "type": "valueSpinner",
                        "bind": "options.inducerOffset",
                        "labelText": "Inducer Offset",
                        "units": "v",
                        "required": true,
                        "canEdit": true,
                        "labelAttrs": {
                          "style": {
                            "padding-right": ".25rem"
                          }
                        },
                        "min": 0,
                        "max": 10,
                        "step": 0.1,
                        "style": {
                          "display": "block"
                        }
                      }
                    },
                    {
                      "bind": "options.psiPerVolt",
                      "dataType": "number",
                      "default": 25,
                      "field": {
                        "bind": "options.psiPerVolt",
                        "type": "valueSpinner",
                        "labelText": "PSI per Volt",
                        "units": "psi",
                        "required": true,
                        "canEdit": true,
                        "labelAttrs": {
                          "style": {
                            "padding-right": ".25rem"
                          }
                        },
                        "min": 0,
                        "max": 50,
                        "style": {
                          "display": "block"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "field": {
                "type": "fieldset",
                "legend": "High Pressure Alarm"
              },
              "options": [
                {
                  "field": {
                    "type": "div",
                    "style": {
                      "width": "15rem"
                    },
                    "html": "These settings will trigger the alarm pin when the pressure is exceeded.  This trigger will not be identified in the REM although it could be wired to a GPIO pin to reflect the alarm state.<hr style=\"margin:2px\"></hr>Provide the max pressure as well as the tolerance for when the alarm will reset.",
                    "cssClass": "script-advanced-instructions"
                  }
                },
                {
                  "default": 0,
                  "field": {
                    "binding": "options.alarm.enable",
                    "type": "checkbox",
                    "labelText": "Enable",
                    "style": {
                      "display": "block"
                    }
                  }
                },
                {
                  "default": 0,
                  "field": {
                    "binding": "options.alarm.pressure",
                    "type": "valueSpinner",
                    "labelText": "Pressure",
                    "min": 0,
                    "max": 1000,
                    "style": {
                      "display": "block"
                    },
                    "labelAttrs": {
                      "style": {
                        "width": "5rem"
                      }
                    },
                    "inputAttrs": {
                      "style": {
                        "width": "5rem"
                      }
                    },
                    "unitsBinding": "options.alarm.units.name"
                  }
                },
                {
                  "default": 0,
                  "field": {
                    "binding": "options.alarm.tolerance",
                    "type": "valueSpinner",
                    "labelText": "Tolerance",
                    "min": 0,
                    "max": 1000,
                    "style": {
                      "display": "block"
                    },
                    "labelAttrs": {
                      "style": {
                        "width": "5rem"
                      }
                    },
                    "inputAttrs": {
                      "style": {
                        "width": "5rem"
                      }
                    },
                    "unitsBinding": "options.alarm.units.name"
                  }
                }
              ]
            }
          ]
        }
      ],
      "interfaces": [
        "generic"
      ]
    }
  ]
}